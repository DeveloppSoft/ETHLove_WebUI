var abi = [{"constant":true,"inputs":[],"name":"refund_on","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"party_one","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"party_two","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"DIVORCE_BID","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"is_witness","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"SEND_FUNDS_TO","outputs":[{"name":"","type":"address"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"acceptUnion","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"isInitialized","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"refund","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"witness","type":"address"}],"name":"addWitness","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"askDivorce","outputs":[],"payable":true,"type":"function"},{"constant":true,"inputs":[],"name":"ACCEPT_BID","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isDivorced","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"isMarried","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"endInitialization","outputs":[],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"url_document","outputs":[{"name":"","type":"bytes32"}],"payable":false,"type":"function"},{"constant":true,"inputs":[],"name":"required_signatures","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"inputs":[{"name":"first_party","type":"address"},{"name":"second_party","type":"address"},{"name":"url","type":"bytes32"},{"name":"days_before_refund","type":"uint256"}],"payable":false,"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"witness","type":"address"}],"name":"WitnessAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"accepter","type":"address"}],"name":"Accepted","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"newState","type":"uint8"}],"name":"StateChanged","type":"event"}]

var bin = "606060405234156200001057600080fd5b60405160808062001321833981016040528080519060200190919080519060200190919080519060200190919080519060200190919050505b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16141515156200009957600080fd5b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614151515620000e957600080fd5b83600060016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555082600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508160028160001916905550620001b8426200019e8362015180620001f56401000000000262001000176401000000009004565b620002506401000000000262000f72176401000000009004565b600381905550600260048190555060008060006101000a81548160ff02191690836003811115620001e557fe5b02179055505b505050506200028e565b6000808214156200020a57600090506200024a565b817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8115156200023657fe5b048311156200024457600080fd5b81830290505b92915050565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038311156200028257600080fd5b81830190505b92915050565b611083806200029e6000396000f300606060405236156100ef576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806304b3e496146100f4578063071b94461461011d578063123e39681461017257806316e3cd9c146101c75780632354a1e3146101f05780632a304cf1146102415780632dcaba9e14610296578063392e53cd146102a0578063590e1ae3146102cd57806359e26be1146102e25780635c2533dc1461031b578063754c52e7146103255780638f9443e11461034e578063a702314d1461037b578063b397657d146103a8578063e88f99a3146103bd578063f65a2771146103ee575b600080fd5b34156100ff57600080fd5b610107610417565b6040518082815260200191505060405180910390f35b341561012857600080fd5b61013061041d565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561017d57600080fd5b610185610443565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34156101d257600080fd5b6101da610469565b6040518082815260200191505060405180910390f35b34156101fb57600080fd5b610227600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610475565b604051808215151515815260200191505060405180910390f35b341561024c57600080fd5b610254610495565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61029e6104ad565b005b34156102ab57600080fd5b6102b361074d565b604051808215151515815260200191505060405180910390f35b34156102d857600080fd5b6102e061077c565b005b34156102ed57600080fd5b610319600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061098e565b005b610323610c8a565b005b341561033057600080fd5b610338610da0565b6040518082815260200191505060405180910390f35b341561035957600080fd5b610361610dac565b604051808215151515815260200191505060405180910390f35b341561038657600080fd5b61038e610ddb565b604051808215151515815260200191505060405180910390f35b34156103b357600080fd5b6103bb610e0b565b005b34156103c857600080fd5b6103d0610ee0565b60405180826000191660001916815260200191505060405180910390f35b34156103f957600080fd5b610401610ee6565b6040518082815260200191505060405180910390f35b60035481565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b67058d15e17628000081565b60056020528060005260406000206000915054906101000a900460ff1681565b737726104068b4d19f416ea7d44a15d07ab1f8998081565b67016345785d8a0000341415156104c357600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061056c5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b806105c05750600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b15156105cb57600080fd5b6105d361074d565b80156105e457506105e2610ddb565b155b15156105ef57600080fd5b6105fc6004546001610eec565b600481905550600680548060010182816106169190610faf565b916000526020600020900160005b33909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550507f2e7bcc1a1a1c1bea0ff9a677c29b43662d6560afbebd99c213389fc15a6279d233604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a16000600454141561074a576106de6002610f07565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f19350505050151561074957600080fd5b5b5b565b600080600381111561075b57fe5b6000809054906101000a900460ff16600381111561077557fe5b1190505b90565b6000426003541115151561078f57600080fd5b61079761074d565b80156107a857506107a6610ddb565b155b15156107b357600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061085c5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b806108b05750600560003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff165b15156108bb57600080fd5b600090505b60068054905081101561095e576006818154811015156108dc57fe5b906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc67016345785d8a00009081150290604051600060405180830381858888f19350505050151561095057600080fd5b5b80806001019150506108c0565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff16ff5b50565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16141515156109dd57600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610a3a57600080fd5b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610a9757600080fd5b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610b405750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610b4b57600080fd5b600560008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16151515610ba457600080fd5b610bac61074d565b151515610bb857600080fd5b6001600560008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff021916908315150217905550610c1d6004546001610f72565b6004819055507ff5944521c155e80db583372b9992336b6616b14dfb924a5cf6ef97b256d2803481604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a15b50565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610d335750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610d3e57600080fd5b67058d15e17628000034141515610d5457600080fd5b610d5c610ddb565b1515610d6757600080fd5b610d716003610f07565b737726104068b4d19f416ea7d44a15d07ab1f8998073ffffffffffffffffffffffffffffffffffffffff16ff5b565b67016345785d8a000081565b6000600380811115610dba57fe5b6000809054906101000a900460ff166003811115610dd457fe5b1490505b90565b600060026003811115610dea57fe5b6000809054906101000a900460ff166003811115610e0457fe5b1490505b90565b600060019054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161480610eb45750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16145b1515610ebf57600080fd5b610ec761074d565b151515610ed357600080fd5b610edd6001610f07565b5b565b60025481565b60045481565b600081831015610efb57600080fd5b81830390505b92915050565b806000806101000a81548160ff02191690836003811115610f2457fe5b02179055507f551dc40198cc79684bb69e4931dba4ac16e4598792ee1c0a5000aeea366d7bb68160405180826003811115610f5b57fe5b60ff16815260200191505060405180910390a15b50565b6000817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff03831115610fa357600080fd5b81830190505b92915050565b815481835581811511610fd657818360005260206000209182019101610fd59190610fdb565b5b505050565b610ffd91905b80821115610ff9576000816000905550600101610fe1565b5090565b90565b6000808214156110135760009050611051565b817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff81151561103e57fe5b0483111561104b57600080fd5b81830290505b929150505600a165627a7a7230582053ee9b597e1cd80e290a9b66383286ac7e9e2d5f5467a6796bfa56542cbe1e2a0029"

var gas = 3000000

// TODO: should be deprecated soon

window.addEventListener('load', function() {
  $('.modal').modal()

  // Checking if Web3 has been injected by the browser (Mist/MetaMask)
  if (typeof web3 !== 'undefined') {
    // Use Mist/MetaMask's provider
    window.web3 = new Web3(web3.currentProvider)

    // Check network
    web3.version.getNetwork((err, netId) => {
      switch (netId) {
        case "1":
          break
        default:
          Materialize.toast('We detected you are not using the main network, please switch to the main one if you want to do "real" agreements, test networks are only for testing.', 3000)
      }
    })

  } else {
    $('#error_web3').modal('open')
  }
})
